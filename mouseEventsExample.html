<html>
  <body>
    <canvas id="canvas" width="200" height="200"></canvas>
    <script>
      const GRID_STROKE_COLOR = "blue";
      const BACKGROUND_COLOR = "black";
      const STROKE_COLOR = "white";
      const CANVAS_WIDTH = 200;
      const GRID_WIDTH = 20;
      // We'll draw on a 20 x 20 grid.
      // CANVAS_WIDTH divided by 20 GRID_WIDTH equals 10 pixels per grid block.
      const SCALED_PIXEL_WIDTH = CANVAS_WIDTH / GRID_WIDTH;
      const HOST = "localhost";
      const PORT = "8888";
      let pixelData = [];
      function drawGrid(ctx) {
          ctx.fillStyle = BACKGROUND_COLOR;
          ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_WIDTH);
          ctx.strokeStyle = GRID_STROKE_COLOR;
          for (
              let x = SCALED_PIXEL_WIDTH, y = SCALED_PIXEL_WIDTH;
              x < CANVAS_WIDTH;
              x += SCALED_PIXEL_WIDTH, y += SCALED_PIXEL_WIDTH
          ) {
              ctx.beginPath();
              ctx.moveTo(x, 0);
              ctx.lineTo(x, CANVAS_WIDTH);
              ctx.moveTo(0, y);
              ctx.lineTo(CANVAS_WIDTH, y);
              ctx.stroke();
          }
      };
      let canvasEl = document.getElementById("canvas");
      let context = canvasEl.getContext("2d");
      drawGrid(context);

      function fillSquare(mouseEvent, context, canvasElement) {
          let boundingRect = canvasElement.getBoundingClientRect();
          let x = mouseEvent.clientX - boundingRect.x;
          let y = mouseEvent.clientY - boundingRect.y;
          let xPixel = Math.floor(x / SCALED_PIXEL_WIDTH);
          let yPixel = Math.floor(y / SCALED_PIXEL_WIDTH);
          context.fillStyle = STROKE_COLOR;
          context.fillRect(
              xPixel * SCALED_PIXEL_WIDTH,
              yPixel * SCALED_PIXEL_WIDTH,
              SCALED_PIXEL_WIDTH,
              SCALED_PIXEL_WIDTH
          );
          // Along with coloring the square in the grid,
          // we also want to store the information that we colored
          // a particular pixel in our pixelData that we'll later
          // send to a server to either train our model or make
          // a prediction.
          let pixelIndex = yPixel * GRID_WIDTH + xPixel;
          pixelData[pixelIndex] = 1;
      }
      function onMouseDown(event, context, canvas) {
          canvas.isDrawing = true;
          fillSquare(event, context, canvas);
      }
      
      function onMouseUp(canvas) {
          canvas.isDrawing = false;
      }
      
      function onMouseMove(event, context, canvas) {
          if (!canvas.isDrawing) {
              return;
          }
          fillSquare(event, context, canvas);
      }
      canvasEl.onmousemove = function(event) { onMouseMove(event, context, canvasEl); };
      canvasEl.onmousedown = function(event) { onMouseDown(event, context, canvasEl); };
      canvasEl.onmouseup = function(_) { onMouseUp(canvasEl); };
    </script>
  </body>
</html>
